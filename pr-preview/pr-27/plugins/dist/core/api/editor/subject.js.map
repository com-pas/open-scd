{"version":3,"file":"subject.js","sourceRoot":"","sources":["../../../../../core/api/editor/subject.ts"],"names":[],"mappings":"AAGA,MAAM,OAAO,OAAO;IAApB;QACU,gBAAW,GAAoB,EAAE,CAAC;IAqB5C,CAAC;IAnBQ,IAAI,CAAC,KAAQ;QAClB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IAC1C,CAAC;IAEM,SAAS,CAAC,UAAyB;QACxC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAElC,OAAO,GAAG,EAAE;YACV,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAC7B,OAAO,UAAU,CAAC;QACpB,CAAC,CAAA;IACH,CAAC;IAEM,WAAW,CAAC,UAAyB;QAC1C,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,CAAC,CAAC;QACxE,IAAI,aAAa,GAAG,CAAC,CAAC,EAAE;YACtB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;SAC3C;IACH,CAAC;CACF","sourcesContent":["export type Subscriber<T> = (value: T) => void;\nexport type Unsubscriber<T> = () => Subscriber<T>;\n\nexport class Subject<T> {\n  private subscribers: Subscriber<T>[] = [];\n\n  public next(value: T): void {\n    this.subscribers.forEach(s => s(value));\n  }\n\n  public subscribe(subscriber: Subscriber<T>): Unsubscriber<T> {\n    this.subscribers.push(subscriber);\n\n    return () => {\n      this.unsubscribe(subscriber);\n      return subscriber;\n    }\n  }\n\n  public unsubscribe(subscriber: Subscriber<T>): void {\n    const indexToRemove = this.subscribers.findIndex(s => s === subscriber);\n    if (indexToRemove > -1) {\n      this.subscribers.splice(indexToRemove, 1);\n    }\n  }\n}\n"]}